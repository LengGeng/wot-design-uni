import{g as e,i as l,m as a,l as s,w as o,K as r,M as n,h as t,t as i,p as u,c,N as d,z as p,O as f,b as m}from"./page-wraper.83fcb5aa.js";import{d as h,r as y,v as g,q as _,Q as b,h as w,j as v,o as x,c as k,w as S,n as C,u as I,y as $,x as P,p as j,a as V,e as W,F as L,b as q,t as T,i as z,Y as B,g as E}from"./index-d8aee22c.js";import{u as K}from"./useTranslate.cac5ae85.js";const M=m(h({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customInputClass:l(""),customLabelClass:l(""),placeholder:String,placeholderStyle:String,placeholderClass:l(""),cursorSpacing:a(0),cursor:a(-1),selectionStart:a(-1),selectionEnd:a(-1),adjustPosition:s(!0),holdKeyboard:s(!1),confirmType:l("done"),confirmHold:s(!1),focus:s(!1),type:l("text"),maxlength:{type:Number,default:-1},disabled:s(!1),alwaysEmbed:s(!1),alignRight:s(!1),modelValue:o(""),showPassword:s(!1),clearable:s(!1),readonly:s(!1),useSuffixSlot:s(!1),usePrefixSlot:s(!1),prefixIcon:String,suffixIcon:String,showWordLimit:s(!1),label:String,labelWidth:l("33%"),useLabelSlot:s(!1),size:String,error:s(!1),center:s(!1),noBorder:s(!1),required:s(!1),prop:String,rules:r(),clearTrigger:l("always"),focusWhenClear:s(!0)},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,{translate:s}=K("input"),o=y(!1),r=y(!1),m=y(!1),h=y(!1),M=y(""),H=n();g((()=>a.focus),(e=>{m.value=e}),{immediate:!0,deep:!0}),g((()=>a.modelValue),(e=>{M.value=i(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:O}=t(d),A=_((()=>i(a.placeholder)?a.placeholder:s("placeholder"))),F=_((()=>{const{disabled:e,readonly:l,clearable:s,clearTrigger:o}=a;return!(!s||l||e||!M.value||!("always"===o||"focus"===a.clearTrigger&&h.value))})),N=_((()=>{const{disabled:e,readonly:l,maxlength:s,showWordLimit:o}=a;return Boolean(!e&&!l&&i(s)&&s>-1&&o)})),R=_((()=>O&&a.prop&&O.errorMessages&&O.errorMessages[a.prop]?O.errorMessages[a.prop]:"")),G=_((()=>{let e=!1;if(O&&O.props.rules){const l=O.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some((e=>e.required)))}return a.required||a.rules.some((e=>e.required))||e})),Q=_((()=>`wd-input  ${a.label||a.useLabelSlot?"is-cell":""} ${a.center?"is-center":""} ${H.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${M.value&&String(M.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`)),U=_((()=>`wd-input__label ${a.customLabelClass} ${G.value?"is-required":""}`)),Y=_((()=>`wd-input__placeholder  ${a.placeholderClass}`)),D=_((()=>a.labelWidth?u({"min-width":a.labelWidth,"max-width":a.labelWidth}):""));function J(){o.value=!o.value}function X(){r.value=!0,h.value=!1,M.value="",a.focusWhenClear&&(m.value=!1),p((()=>{a.focusWhenClear&&(m.value=!0,h.value=!0),l("change",{value:""}),l("update:modelValue",M.value),l("clear")}))}async function Z(){await f(150),r.value?r.value=!1:(h.value=!1,l("blur",{value:M.value}))}function ee({detail:e}){h.value=!0,l("focus",e)}function le({detail:e}){l("update:modelValue",M.value),l("input",e)}function ae({detail:e}){l("keyboardheightchange",e)}function se({detail:e}){l("confirm",e)}function oe(){l("clicksuffixicon")}function re(){l("clickprefixicon")}function ne(e){l("click",e)}return b((()=>{M.value=function(e){const{maxlength:l}=a;return i(l)&&-1!==l&&String(e).length>l?e.toString().slice(0,l):e}(M.value),l("update:modelValue",M.value)})),(e,l)=>{const a=w(v("wd-icon"),c),s=z,r=B,n=E;return x(),k(s,{class:C(I(Q)),style:$(e.customStyle),onClick:ne},{default:S((()=>[e.label||e.useLabelSlot?(x(),k(s,{key:0,class:C(I(U)),style:$(I(D))},{default:S((()=>[e.prefixIcon||e.usePrefixSlot?(x(),k(s,{key:0,class:"wd-input__prefix"},{default:S((()=>[e.prefixIcon&&!e.usePrefixSlot?(x(),k(a,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):P(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):j("",!0),V(s,{class:"wd-input__label-inner"},{default:S((()=>[e.label?(x(),W(L,{key:0},[q(T(e.label),1)],64)):P(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):j("",!0),V(s,{class:"wd-input__body"},{default:S((()=>[V(s,{class:"wd-input__value"},{default:S((()=>[!e.prefixIcon&&!e.usePrefixSlot||e.label?j("",!0):(x(),k(s,{key:0,class:"wd-input__prefix"},{default:S((()=>[e.prefixIcon?(x(),k(a,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):j("",!0),P(e.$slots,"prefix",{},void 0,!0)])),_:3})),V(r,{class:C(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",I(N)?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!o.value,modelValue:M.value,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value=e),placeholder:I(A),disabled:e.disabled,maxlength:e.maxlength,focus:m.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":I(Y),onInput:le,onFocus:ee,onBlur:Z,onConfirm:se,onKeyboardheightchange:ae},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class"]),e.readonly?(x(),k(s,{key:1,class:"wd-input__readonly-mask"})):j("",!0),I(F)||e.showPassword||e.suffixIcon||I(N)||e.$slots.suffix?(x(),k(s,{key:2,class:"wd-input__suffix"},{default:S((()=>[I(F)?(x(),k(a,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:X})):j("",!0),e.showPassword?(x(),k(a,{key:1,"custom-class":"wd-input__icon",name:o.value?"view":"eye-close",onClick:J},null,8,["name"])):j("",!0),I(N)?(x(),k(s,{key:2,class:"wd-input__count"},{default:S((()=>[V(n,{class:C([M.value&&String(M.value).length>0?"wd-input__count-current":"",String(M.value).length>e.maxlength?"is-error":""])},{default:S((()=>[q(T(String(M.value).length),1)])),_:1},8,["class"]),q(" /"+T(e.maxlength),1)])),_:1})):j("",!0),e.suffixIcon?(x(),k(a,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:oe},null,8,["name"])):j("",!0),P(e.$slots,"suffix",{},void 0,!0)])),_:3})):j("",!0)])),_:3}),I(R)?(x(),k(s,{key:0,class:"wd-input__error-message"},{default:S((()=>[q(T(I(R)),1)])),_:1})):j("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-61c2a806"]]);export{M as _};
