import{u as e,_ as l}from"./wd-message-box.1bbf26f9.js";import{d as o,N as a,r as t,q as n,v as u,Q as s,S as d,h as i,j as r,o as p,c,w as m,a as v,e as f,F as _,f as g,n as b,b as w,t as y,p as V,x as h,y as k,u as C,J as x,g as $,i as K,E as j,T as z}from"./index-d8aee22c.js";import{g as I,m as T,i as U,l as S,K as N,h as O,c as B,k as M,t as Q,C as F,b as H,G as E,H as G,_ as P,a as q}from"./page-wraper.83fcb5aa.js";import{p as A,r as L,q as D,c as J,u as R}from"./clickoutside.f4a6258f.js";import{u as W}from"./useChildren.11271381.js";import{_ as X}from"./demo-block.4a3c27e6.js";import{_ as Y}from"./wd-slider.1e42c581.js";import{_ as Z}from"./wd-button.280621c4.js";import{_ as ee}from"./wd-sort-button.70d35afb.js";import"./wd-input.c521d55a.js";import"./useTranslate.cac5ae85.js";import"./useTouch.d283360b.js";const le=Symbol("wd-drop-menu"),oe={...I,zIndex:T(12),direction:U("down"),modal:S(!0),closeOnClickModal:S(!0),duration:T(200)},ae=H(o({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...I,customTitle:U(""),customIcon:U(""),modelValue:[String,Number],options:N(),disabled:S(!1),iconName:U("check"),title:String,icon:U("arrow-down"),iconSize:U("14px"),beforeToggle:Function,valueKey:U("value"),labelKey:U("label"),tipKey:U("tip")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:l,emit:o}){const j=e,z=a(D,null),I=t(!1),T=t(!1),U=t(),S=t(12),N=t(!0),H=t(!0),E=t(0),{parent:G}=O(le),{proxy:P}=x(),q=n((()=>{let e="";return e=I.value&&G?"down"===G.props.direction?`top: calc(var(--window-top) + ${G.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${G.offset.value}px)`:"",e}));function J(){T.value&&(F(j.beforeToggle)?j.beforeToggle({status:!1,resolve:e=>{e&&R()}}):R())}function R(){T.value&&(T.value=!1)}function W(){T.value||(F(j.beforeToggle)?j.beforeToggle({status:!0,resolve:e=>{e&&X()}}):X())}function X(){I.value=!0,T.value=!0,G&&(N.value=Boolean(G.props.modal),E.value=Number(G.props.duration),H.value=Boolean(G.props.closeOnClickModal),U.value="down"===G.props.direction?"top":"bottom"),o("open")}function Y(){I.value=!1,o("closed")}function Z(){o("open")}function ee(){o("opened")}function oe(){o("close")}return u((()=>j.modelValue),(e=>{Q(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),s((()=>{z&&z.pushToQueue?z.pushToQueue(P):A(P)})),d((()=>{z&&z.removeFromQueue?z.removeFromQueue(P):L(P)})),l({getShowPop:function(){return T.value},open:W,close:J,toggle:function(){T.value?J():W()}}),(e,l)=>{const a=$,t=K,n=i(r("wd-icon"),B),u=i(r("wd-popup"),M);return I.value?(p(),c(t,{key:0,class:b(`wd-drop-item  ${e.customClass}`),style:k(`z-index: ${S.value}; ${C(q)};${e.customStyle}`)},{default:m((()=>[v(u,{modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=e=>T.value=e),"z-index":S.value,duration:E.value,position:U.value,"custom-style":"position: absolute; max-height: 80%;","modal-style":"position: absolute;",modal:N.value,"close-on-click-modal":!1,onClickModal:l[1]||(l[1]=e=>H.value&&J()),onBeforeEnter:Z,onAfterEnter:ee,onBeforeLeave:oe,onAfterLeave:Y},{default:m((()=>[e.options.length?(p(),c(t,{key:0},{default:m((()=>[(p(!0),f(_,null,g(e.options,((l,u)=>(p(),c(t,{key:u,onClick:e=>function(e){if(j.disabled)return;const{valueKey:l}=j,a=j.options[e];o("update:modelValue",""!==a[l]&&void 0!==a[l]?a[l]:a),o("change",{value:""!==a[l]&&void 0!==a[l]?a[l]:a,selectedItem:a}),J()}(u),class:b("wd-drop-item__option "+((""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?"is-active":""))},{default:m((()=>[v(t,{class:b(`wd-drop-item__title ${e.customTitle}`)},{default:m((()=>[v(a,null,{default:m((()=>[w(y(l[e.labelKey]?l[e.labelKey]:l),1)])),_:2},1024),l[e.tipKey]?(p(),c(a,{key:0,class:"wd-drop-item__tip"},{default:m((()=>[w(y(l[e.tipKey]),1)])),_:2},1024)):V("",!0)])),_:2},1032,["class"]),(""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?(p(),c(n,{key:0,name:e.iconName,size:"20px",class:b(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):V("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):h(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","modal"])])),_:3},8,["class","style"])):V("",!0)}}}),[["__scopeId","data-v-53211005"]]),te=H(o({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:oe,setup(e){const l=e,o=a(D,null),n=t(`dropMenuId${E()}`),d=t(0),V=t(0),{proxy:$}=x(),{linkChildren:I,children:T}=W(le);function U(e){e.preventDefault(),e.stopPropagation()}function S(e){const{title:l,modelValue:o,options:a,valueKey:t,labelKey:n}=e;if(l)return l;for(let u=0,s=a.length;u<s;u++)if(o===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function N(e){G(`#${n.value}`,!1,$).then((o=>{if(!o)return;const{top:a,bottom:t}=o;"down"===l.direction?d.value=Number(t):d.value=V.value-Number(a),e.$.exposed.toggle()}))}return I({props:l,fold:N,offset:d}),u((()=>l.direction),(e=>{["up","down"].includes(e)&&console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),s((()=>{V.value=j().windowHeight})),(e,l)=>{const a=K,t=i(r("wd-icon"),B);return p(),c(a,{style:k(e.customStyle),class:b(`wd-drop-menu ${e.customClass}`),onClick:z(U,["stop"]),id:n.value},{default:m((()=>[v(a,{class:"wd-drop-menu__list"},{default:m((()=>[(p(!0),f(_,null,g(C(T),((e,l)=>(p(),c(a,{key:l,onClick:l=>function(e){e&&!e.disabled&&(o&&o.closeOther?o.closeOther(e):J(e),N(e))}(e),class:b(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:m((()=>[v(a,{class:"wd-drop-menu__item-title"},{default:m((()=>[v(a,{class:"wd-drop-menu__item-title-text"},{default:m((()=>[w(y(S(e)),1)])),_:2},1024),v(t,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),h(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick","id"])}}}),[["__scopeId","data-v-cae577f0"]]),ne=H(o({__name:"Index",setup(o){const{closeOutside:a}=R(),n=e(),u=t(),s=t(),d=t(30);t(!1);const f=t(1),_=t(0),g=t(0),b=t(0),y=t(0),V=t(0),h=t(0),k=t(0),x=t(0),$=t(0),j=t([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),z=t([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function I(){var e;null==(e=s.value)||e.initSlider()}function T({value:e}){console.log(e)}function U({value:e}){console.log(e)}function S({value:e}){console.log(e)}function N({value:e}){console.log(e)}function O({value:e}){console.log(e)}function B({value:e}){console.log(e)}function M({value:e}){console.log(e)}function Q({value:e}){console.log(e)}function F({value:e}){console.log(e)}function H(){u.value.close()}const E=({status:e,resolve:l})=>{n.confirm({title:"异步"+(e?"打开":"关闭"),msg:`确定要${e?"打开":"关闭"}下拉菜单吗？`}).then((()=>{l(!0)})).catch((()=>{l(!1)}))};return(e,o)=>{const t=i(r("wd-message-box"),l),n=i(r("wd-drop-menu-item"),ae),G=i(r("wd-drop-menu"),te),A=i(r("demo-block"),X),L=i(r("wd-slider"),Y),D=i(r("wd-cell"),P),J=i(r("wd-button"),Z),R=K,W=i(r("wd-sort-button"),ee),le=i(r("page-wraper"),q);return p(),c(le,null,{default:m((()=>[v(t),v(R,{class:"demo-body",onClick:C(a)},{default:m((()=>[v(A,{title:"基本用法",transparent:""},{default:m((()=>[v(G,null,{default:m((()=>[v(n,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=e=>f.value=e),options:j.value,onChange:T},null,8,["modelValue","options"]),v(n,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=e=>_.value=e),options:z.value,onChange:U},null,8,["modelValue","options"])])),_:1})])),_:1}),v(A,{title:"自定义菜单内容",transparent:""},{default:m((()=>[v(G,null,{default:m((()=>[v(n,{modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=e=>g.value=e),options:j.value,onChange:S},null,8,["modelValue","options"]),v(n,{ref_key:"dropMenu",ref:u,title:"筛选",onOpened:I},{default:m((()=>[v(R,null,{default:m((()=>[v(L,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),ref_key:"slider",ref:s},null,8,["modelValue"]),v(D,{title:"标题文字",value:"内容"}),v(D,{title:"标题文字",label:"描述信息",value:"内容"}),v(R,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:m((()=>[v(J,{block:"",size:"large",onClick:H},{default:m((()=>[w("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),v(A,{title:"自定义菜单选项",transparent:""},{default:m((()=>[v(R,{class:"custom-menu"},{default:m((()=>[v(G,{"custom-style":"flex: 1; min-width: 0"},{default:m((()=>[v(n,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=e=>b.value=e),options:j.value,onChange:N},null,8,["modelValue","options"])])),_:1}),v(R,{style:{flex:"1"}},{default:m((()=>[v(W,{modelValue:y.value,"onUpdate:modelValue":o[5]||(o[5]=e=>y.value=e),title:"上架时间",onChange:O},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),v(A,{title:"自定义菜单图标",transparent:""},{default:m((()=>[v(G,null,{default:m((()=>[v(n,{title:"地图",icon:"location","icon-size":"24px"})])),_:1})])),_:1}),v(A,{title:"异步打开/关闭",transparent:""},{default:m((()=>[v(G,null,{default:m((()=>[v(n,{modelValue:$.value,"onUpdate:modelValue":o[6]||(o[6]=e=>$.value=e),options:j.value,onChange:T,"before-toggle":E},null,8,["modelValue","options"])])),_:1})])),_:1}),v(A,{title:"向上弹出",transparent:""},{default:m((()=>[v(G,{direction:"up"},{default:m((()=>[v(n,{modelValue:V.value,"onUpdate:modelValue":o[7]||(o[7]=e=>V.value=e),options:j.value,onChange:B},null,8,["modelValue","options"]),v(n,{modelValue:h.value,"onUpdate:modelValue":o[8]||(o[8]=e=>h.value=e),options:z.value,onChange:M},null,8,["modelValue","options"])])),_:1})])),_:1}),v(A,{title:"禁用",transparent:""},{default:m((()=>[v(G,{direction:"up"},{default:m((()=>[v(n,{modelValue:k.value,"onUpdate:modelValue":o[9]||(o[9]=e=>k.value=e),disabled:"",options:j.value,onChange:Q},null,8,["modelValue","options"]),v(n,{modelValue:x.value,"onUpdate:modelValue":o[10]||(o[10]=e=>x.value=e),options:z.value,onChange:F},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-668365bb"]]);export{ne as default};
