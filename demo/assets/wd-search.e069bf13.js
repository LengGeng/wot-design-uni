import{g as e,i as a,l,w as s,p as c,z as u,c as t,b as o}from"./page-wraper.83fcb5aa.js";import{d as n,r,v as d,m as i,q as h,h as v,j as f,o as m,c as p,w as _,a as w,x as g,y as x,u as y,b,t as C,p as k,n as V,g as S,i as $,Y as j}from"./index-d8aee22c.js";import{u as L}from"./useTranslate.cac5ae85.js";const I=o(n({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,modelValue:a(""),useSuffixSlot:l(!1),placeholder:String,cancelTxt:String,light:l(!1),hideCancel:l(!1),disabled:l(!1),maxlength:s(-1),placeholderLeft:l(!1),focus:l(!1),focusWhenClear:l(!1)},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:a}){const l=e,{translate:s}=L("search"),o=r(!1),n=r(!1),I=r(""),T=r(!0),W=r(!1);d((()=>l.modelValue),(e=>{I.value=e,e&&(n.value=!0)}),{immediate:!0}),d((()=>l.focus),(e=>{if(e){if(l.disabled)return;F()}})),i((()=>{l.focus&&F()}));const q=h((()=>`wd-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),z=h((()=>{const e={display:""===I.value&&T.value?"flex":"none"};return c(e)}));function B(e){n.value=e,u((()=>{o.value=e}))}function F(){l.disabled||u().then((()=>u())).then((()=>u())).then((()=>{T.value=!1,B(!0)}))}function G(e){I.value=e.detail.value,a("update:modelValue",e.detail.value),a("change",{value:e.detail.value})}function H(){I.value="",W.value=!0,l.focusWhenClear&&(o.value=!1),u().then((()=>u())).then((()=>u())).then((()=>{l.focusWhenClear?(T.value=!1,B(!0)):(T.value=!0,B(!1)),a("change",{value:""}),a("update:modelValue",""),a("clear")}))}function U({detail:{value:e}}){a("search",{value:e})}function Y(){W.value?W.value=!1:(T.value=!1,a("focus",{value:I.value}))}function A(){W.value||(T.value=!I.value,n.value=!T.value,o.value=!1,a("blur",{value:I.value}))}function D(){a("cancel",{value:I.value})}return(e,a)=>{const l=v(f("wd-icon"),t),c=S,u=$,r=j;return m(),p(u,{class:V(y(q)),style:x(e.customStyle)},{default:_((()=>[w(u,{class:"wd-search__block"},{default:_((()=>[g(e.$slots,"prefix",{},void 0,!0),w(u,{class:"wd-search__field"},{default:_((()=>[e.placeholderLeft?k("",!0):(m(),p(u,{key:0,style:x(y(z)),class:"wd-search__cover",onClick:F},{default:_((()=>[w(l,{name:"search","custom-class":"wd-search__search-icon"}),w(c,{class:"wd-search__placeholder-txt"},{default:_((()=>[b(C(e.placeholder||y(s)("search")),1)])),_:1})])),_:1},8,["style"])),n.value||I.value||e.placeholderLeft?(m(),p(l,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):k("",!0),n.value||I.value||e.placeholderLeft?(m(),p(r,{key:2,placeholder:e.placeholder||y(s)("search"),"placeholder-class":"wd-search__placeholder-txt","confirm-type":"search",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),class:"wd-search__input",onFocus:Y,onInput:G,onBlur:A,onConfirm:U,disabled:e.disabled,maxlength:e.maxlength,focus:o.value},null,8,["placeholder","modelValue","disabled","maxlength","focus"])):k("",!0),I.value?(m(),p(l,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:H})):k("",!0)])),_:1})])),_:3}),e.hideCancel?k("",!0):g(e.$slots,"suffix",{key:0},(()=>[w(u,{class:"wd-search__cancel",onClick:D},{default:_((()=>[b(C(e.cancelTxt||y(s)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-69c46c56"]]);export{I as _};
