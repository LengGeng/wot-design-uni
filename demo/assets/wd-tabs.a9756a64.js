import{d as a,r as e,q as s,v as t,o as l,c as n,w as i,y as o,x as d,p as c,n as r,i as u,J as m,V as b,m as _,a6 as p,h as f,j as w,a as v,u as y,e as h,F as x,f as g,b as k,t as I,a4 as $}from"./index-d8aee22c.js";import{g as C,w as N,m as S,l as T,D as V,i as j,h as L,t as H,I as X,V as G,b as q,p as z,P as M,c as P,q as W,H as A,v as D}from"./page-wraper.83fcb5aa.js";import{_ as E,a as F}from"./wd-sticky-box.61435707.js";import{u as J}from"./useTouch.d283360b.js";import{u as R}from"./useChildren.11271381.js";import{u as B}from"./useTranslate.cac5ae85.js";const K=Symbol("wd-tabs"),O={...C,modelValue:N(0),slidableNum:S(6),mapNum:S(10),sticky:T(!1),offsetTop:S(0),swipeable:T(!1),lineWidth:V,lineHeight:V,color:j(""),inactiveColor:j(""),animated:T(!1),duration:S(300)},Q=q(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...C,name:V,title:String,disabled:T(!1)},setup(a,{expose:b}){const _=a,p=e(!1),f=e(!1),{proxy:w}=m(),{parent:v,index:y}=L(K),h=s((()=>H(v)?v.state.activeIndex:0));function x(a,e){p.value=a,f.value=e}return t((()=>_.name),(a=>{!H(a)||X(a)||G(a)?v&&function(a){const{name:e}=_;if(null==e||""===e)return;v&&v.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(w):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),t((()=>h.value),(a=>{a===y.value?x(!0,!0):x(p.value,!1)}),{deep:!0,immediate:!0}),b({setShow:x,painted:p}),(a,e)=>{const s=u;return l(),n(s,{class:r(`wd-tab ${a.customClass}`),style:o(a.customStyle)},{default:i((()=>[p.value?(l(),n(s,{key:0,class:"wd-tab__body",style:o(f.value?"":"display: none;")},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):c("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-799df3ee"]]),U=q(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:O,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:e,emit:C}){const N=a,S=".wd-tabs__nav-item",T=".wd-tabs__nav-container",{translate:V}=B("tabs"),j=b({activeIndex:0,lineStyle:"display:none;",inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:L,linkChildren:q}=R(K);q({state:j});const{proxy:O}=m(),Q=J(),U=s((()=>L.map(((a,e)=>({disabled:a.disabled,title:a.title,name:H(a.name)?a.name:e}))))),Y=s((()=>N.animated?z({left:-100*j.activeIndex+"%","transition-duration":N.duration+"ms","-webkit-transition-duration":N.duration+"ms"}):"")),Z=M((function(a=0,e=!1,s=!0){0!==U.value.length&&(a=oa(a),U.value[a].disabled||(j.activeIndex=a,s&&(ea(!1===e),sa()),function(){if(!j.inited)return;U.value[j.activeIndex].name!==N.modelValue&&(C("change",{index:j.activeIndex,name:U.value[j.activeIndex].name}),C("update:modelValue",U.value[j.activeIndex].name))}()))}),100,{leading:!1});function aa(){j.mapShow?(j.animating=!1,setTimeout((()=>{j.mapShow=!1}),300)):(j.mapShow=!0,setTimeout((()=>{j.animating=!0}),100))}function ea(a=!0){if(!j.inited)return;const{lineWidth:e,lineHeight:s}=N;A(S,!0,O).then((t=>{const l={};H(e)&&(l.width=D(e)),H(s)&&(l.height=D(s),l.borderRadius=`calc(${D(s)} / 2)`);const n=t[j.activeIndex];let i=t.slice(0,j.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(n.width)/2;l.transform=`translateX(${i}px) translateX(-50%)`,a&&(l.transition="width 300ms ease, transform 300ms ease"),j.lineStyle=z(l)}))}function sa(){j.inited&&Promise.all([A(S,!0,O),A(T,!1,O)]).then((([a,e])=>{const s=a[j.activeIndex],t=a.slice(0,j.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===j.scrollLeft?j.scrollLeft=t+Math.random()/1e4:j.scrollLeft=t}))}function ta(a){if(void 0===a)return;const{name:e,disabled:s}=U.value[a];s?C("disabled",{index:a,name:e}):(j.mapShow&&aa(),Z(a),C("click",{index:a,name:e}))}function la(a){N.swipeable&&Q.touchStart(a)}function na(a){N.swipeable&&Q.touchMove(a)}function ia(){if(!N.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=Q;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==j.activeIndex?Z(j.activeIndex-1):e.value<0&&j.activeIndex!==U.value.length-1&&(Z(j.activeIndex+1),Z(j.activeIndex+1)))}function oa(a){if(X(a)&&a>=U.value.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),G(a)){const e=U.value.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>N.modelValue),(a=>{X(a)||G(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&H(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>N.modelValue),(a=>{const e=oa(a);Z(a,!1,e!==j.activeIndex)}),{immediate:!1,deep:!0}),t((()=>L.length),(()=>{j.inited&&p((()=>{Z(N.modelValue)}))})),t((()=>N.slidableNum),(a=>{W(a,"slidableNum")})),t((()=>N.mapNum),(a=>{W(a,"mapNum")})),_((()=>{j.inited=!0,p((()=>{Z(N.modelValue,!0)}))})),e({setActive:Z,scrollIntoView:sa,updateLineStyle:ea}),(a,e)=>{const s=u,t=$,m=f(w("wd-icon"),P),b=f(w("wd-sticky"),E),_=f(w("wd-sticky-box"),F);return a.sticky?(l(),n(_,{key:0},{default:i((()=>[v(s,{class:r(`wd-tabs ${a.customClass} ${a.slidableNum<y(U).length?"is-slide":""} ${a.mapNum<y(U).length&&0!==a.mapNum?"is-map":""}`),style:o(a.customStyle)},{default:i((()=>[v(b,{"offset-top":a.offsetTop},{default:i((()=>[v(s,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i((()=>[v(s,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(t,{"scroll-x":a.slidableNum<y(U).length,"scroll-with-animation":"","scroll-left":j.scrollLeft},{default:i((()=>[v(s,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),h(x,null,g(y(U),((e,t)=>(l(),n(s,{onClick:a=>ta(t),key:t,class:r(`wd-tabs__nav-item  ${j.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(j.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[k(I(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wd-tabs__line",style:o(j.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<y(U).length&&0!==a.mapNum?(l(),n(s,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(s,{class:r("wd-tabs__map-btn  "+(j.animating?"is-open":"")),onClick:aa},{default:i((()=>[v(s,{class:r("wd-tabs__map-arrow  "+(j.animating?"is-open":""))},{default:i((()=>[v(m,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(s,{class:"wd-tabs__map-header",style:o(`${j.mapShow?"":"display:none;"}  ${j.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(y(V)("all")),1)])),_:1},8,["style"]),v(s,{class:r("wd-tabs__map-body  "+(j.animating?"is-open":"")),style:o(j.mapShow?"":"display:none")},{default:i((()=>[(l(!0),h(x,null,g(y(U),((e,t)=>(l(),n(s,{class:"wd-tabs__map-nav-item",key:t,onClick:a=>ta(t)},{default:i((()=>[v(s,{class:r(`wd-tabs__map-nav-btn ${j.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:o(j.activeIndex===t?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[k(I(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1})])),_:1},8,["offset-top"]),v(s,{class:"wd-tabs__container",onTouchstart:la,onTouchmove:na,onTouchend:ia,onTouchcancel:ia},{default:i((()=>[v(s,{class:r(["wd-tabs__body",a.animated?"is-animated":""]),style:o(y(Y))},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wd-tabs__mask",style:o(`${j.mapShow?"":"display:none;"} ${j.animating?"opacity:1;":""}`),onClick:aa},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(s,{key:1,class:r(`wd-tabs  ${a.customClass} ${a.slidableNum<y(U).length?"is-slide":""} ${a.mapNum<y(U).length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[v(s,{class:"wd-tabs__nav"},{default:i((()=>[v(s,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(t,{"scroll-x":a.slidableNum<y(U).length,"scroll-with-animation":"","scroll-left":j.scrollLeft},{default:i((()=>[v(s,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),h(x,null,g(y(U),((e,t)=>(l(),n(s,{onClick:a=>ta(t),key:t,class:r(`wd-tabs__nav-item ${j.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(j.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[k(I(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wd-tabs__line",style:o(j.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<y(U).length&&0!==a.mapNum?(l(),n(s,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(s,{class:"wd-tabs__map-btn",onClick:aa},{default:i((()=>[v(s,{class:r("wd-tabs__map-arrow "+(j.animating?"is-open":""))},{default:i((()=>[v(m,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(s,{class:"wd-tabs__map-header",style:o(`${j.mapShow?"":"display:none;"}  ${j.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(y(V)("all")),1)])),_:1},8,["style"]),v(s,{class:r("wd-tabs__map-body "+(j.animating?"is-open":"")),style:o(j.mapShow?"":"display:none")},{default:i((()=>[(l(!0),h(x,null,g(y(U),((a,e)=>(l(),n(s,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>ta(e)},{default:i((()=>[v(s,{class:r(`wd-tabs__map-nav-btn ${j.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[k(I(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1}),v(s,{class:"wd-tabs__container",onTouchstart:la,onTouchmove:na,onTouchend:ia,onTouchcancel:ia},{default:i((()=>[v(s,{class:r(["wd-tabs__body",a.animated?"is-animated":""]),style:o(y(Y))},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wd-tabs__mask",style:o(`${j.mapShow?"":"display:none;"}  ${j.animating?"opacity:1":""}`),onClick:aa},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-456175c4"]]);export{Q as _,U as a};
